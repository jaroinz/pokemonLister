<h1>Pokemon lister</h1>

<div class="container" fxLayout="row">
  <div fxFlex="33%" *ngIf="this.previous" ><button mat-flat-button color="primary" (click)="previousPage()"> < previous </button></div>
  <div fxFlex="33%">total: {{this.count}}</div>
  <div fxFlex="33%" *ngIf="this.next" ><button mat-flat-button color="primary" (click)="nextPage()"> next > </button></div>
</div>

<mat-accordion>
  <mat-expansion-panel *ngFor="let pokemon of this.pokemonList; let i=index"
                       (opened)="viewDetails(pokemon['id'], i)">
    <mat-expansion-panel-header>
      <h2>{{pokemon['name']}}</h2>
    </mat-expansion-panel-header>
    <div class="container" fxLayout="row">
      <div fxFlex="30%" *ngIf="pokemon['artUrl']">
        <img [src]="pokemon['artUrl']" alt="{{pokemon['name'] + ' image'}}" height="150px">
      </div>
      <div>
        <p>Possible evolutions for {{pokemon['name']}}</p>
        <mat-accordion *ngIf="pokemon['evolutionChain']">
          <mat-expansion-panel *ngFor="let chain of pokemon['evolutionChain']; let j=index" (opened)="viewChain(chain)">
            <mat-expansion-panel-header>
              <h3>{{chain['name']}} <span *ngIf="chain['name']===pokemon['name']">(current state)</span></h3>
            </mat-expansion-panel-header>
            <div *ngIf="chain['pokemon']">
              <div *ngIf="chain['pokemon']['artUrl']">
                <img [src]="chain['pokemon']['artUrl']" alt="{{chain['pokemon']['name'] + ' image'}}" height="100px">
              </div>
            </div>

          </mat-expansion-panel>
        </mat-accordion>
      </div>
    </div>
  </mat-expansion-panel>
</mat-accordion>
